!function(e,t){function n(t,n){t=e(t);var a=window.innerHeight,i=window.innerWidth,o=t.height(),r=t.width(),d={};switch(n){case"top":d.top=-(a/2+o)+"px",d.left="50%";break;case"left":d.left=-(i/2+r)+"px",d.top="50%";break;case"right":d.left=i/2+1.5*r+"px",d.top="50%";break;case"bottom":d.top=a+2*o+"px",d.left="50%"}return d}function a(e,t,n){var a=document.createElement(e);return a.classList.add(t),n&&(a.innerHTML=n),a}e.fn.hpModal=function(t,a,i){var o={},r={},d=e.extend({entrance:"fade",startPlacement:"top",speed:"fast",removeBackground:!1},a);switch(o={slide:function(t){var a,o={};switch(d.startPlacement){case"right":a="left";break;case"bottom":a="top";break;default:a=d.startPlacement}o[a]="50%",e(".hp-link-modal__background",t.toggle()).fadeIn("fast",function(){e(".hp-link-modal__inner",t).toggle(!0).css(n(l,d.startPlacement)).animate(o,d.speed,i())})},fade:function(t){e(".hp-link-modal__background",t).toggle(),t.fadeIn("fast",function(){e(".hp-link-modal__inner",t).fadeIn(d.speed,i())})}},r={slide:function(t,a){e(".hp-link-modal__inner",t).animate(n(l,d.startPlacement),d.speed,function(){e(this).toggle(!1),a()}),d.removeBackground!==!1&&e(".hp-link-modal__background",t).fadeOut("fast",function(){e(".hp-link-modal").toggle()})},fade:function(t){e(".hp-link-modal__inner",t).fadeOut(d.speed,function(){d.removeBackground!==!1&&e(".hp-link-modal__background",t).fadeOut("fast"),i(),t.toggle(!1)})}},t){case"open":o[d.entrance](this);break;case"replaceContent":var l=e(".hp-link-modal__inner");l.html(d.content),"undefined"!=typeof i&&i();break;case"close":r[d.entrance](this,i)}return this},e.hpLink=function(n){t.apiData={application:"jQuery",line:n.line,key:n.key,monetizer:"SureHits",data:null,soure_url:window.location.href,uuid:!1};var i,o=e.extend({entrance:"fade",startPlacement:"top",speed:"fast",removeBackground:!1},n);t.sendAnalytics=function(n,a){return t.xhr===!0?!1:(t.xhr=!0,void e.ajax({type:"POST",url:"http://integral.dev/cors/"+a,data:t.combineData(n),crossDomain:!0,success:function(e){t.xhr=!1,t.apiData.uuid||(t.apiData.uuid=e.uuid),e.callback&&t.analyticsCallBacks[e.callback](e)},error:function(){t.xhr=!1,t.resolveWarning("An error has occured. Please try again later.")}}))},t.analyticsCallBacks={zipRequired:function(e){t.redirectURL=e.redirect_to,i.hpModal("replaceContent",{content:t.createZipContent()})},zipNotRequired:function(e){i.hpModal("replaceContent",{content:t.createOutroContent()}),i.hpModal("close",o,function(){t.redirectPage(e.redirect_to)})},zipValidate:function(e){if(e.zip){var n=t.redirectURL.match(/^.+\:\/\/.+\.\w{3}/)[0],a=t.redirectURL.match(/\?.+$/);t.redirectURL=n+"?zip="+e.zip,a&&(t.redirectURL=t.redirectURL+a[0].replace(/^\?/,"&")),i.hpModal("replaceContent",{content:t.createSureHitsIframe(e.url)})}else i.hpModal("replaceContent",{content:t.createZipContent()},function(){t.resolveWarning("Invalid Zip Code.")})}},t.redirectPage=function(e,t){var n=e;if(t){n+="?";for(var a in t)n=n+a+"="+t[a]+"&";n=n.replace(/&$/,"")}window.location.assign(n)},t.createSureHitsIframe=function(e){var n,i,o;return n=a("div","iframe-content"),i=a("h2","modal-header","Carriers in your area!"),n.appendChild(i),o=a("iframe","sure-hits-iframe"),o.setAttribute("src",e),n.appendChild(o),n.appendChild(t.createCloseButton()),n},t.createModal=function(){var n,a,i=document.createElement("div");return i.classList.add("hp-link-modal"),n=document.createElement("div"),n.classList.add("hp-link-modal__background"),i.appendChild(n),a=document.createElement("div"),a.classList.add("hp-link-modal__inner"),contents=t.createInitialContent(),a.appendChild(contents),i.appendChild(a),e("body").append(i),e(i)},t.createCloseButton=function(){var e;return e=a("a","hp-link-modal__close","Close"),e.setAttribute("href",""),e},t.submitZip=function(){var n=e(".hp-link-modal__zip-field").val();if(/^\d{5}$/.test(n)){var a={zip:n};a.event="zipcode_lookup",i.hpModal("replaceContent",{content:t.createOutroContent()},function(){t.sendAnalytics(a,"validate_zip")})}else t.resolveWarning("Invalid Zip Code.")},t.resolveWarning=function(t){"undefined"==typeof t?(t="",e(".hp-link-modal__zip-field").attr("data-hp-link__error","false")):e(".hp-link-modal__zip-field").attr("data-hp-link__error","true"),e(".hp-link-modal__error").text(t)},t.createInitialContent=function(){var e,n,i,o,r;return e=a("div","hp-link-modal__initial"),i=a("h2","modal-header","Processing Request!"),e.appendChild(i),o=a("div","initial-loader"),r=a("div","loading-text","Loading..."),o.appendChild(r),e.appendChild(o),n=a("div","hp-link-modal__error"),o.appendChild(n),e.appendChild(t.createCloseButton()),e},t.createZipContent=function(){var e,n,i,o,r;return e=a("div","hp-link-modal__zip"),i=a("h2","modal-header","Please Enter Your Zip."),e.appendChild(i),contentZip=a("div","zip-content"),o=a("input","hp-link-modal__zip-field"),o.setAttribute("name","zip"),o.setAttribute("type","text"),o.setAttribute("placeholder","Zip Code"),contentZip.appendChild(o),r=a("button","hp-link-modal__zip-submit","Submit"),contentZip.appendChild(r),n=a("div","hp-link-modal__error"),contentZip.appendChild(n),e.appendChild(contentZip),e.appendChild(t.createCloseButton()),e},t.createOutroContent=function(){var e,n,i;return e=a("div","hp-link-modal__outro"),n=a("h2","modal-header","Processing Request!"),e.appendChild(n),contentOutro=a("div","outro-content"),i=a("div","outro-text","Thank You!"),contentOutro.appendChild(i),e.appendChild(contentOutro),e.appendChild(t.createCloseButton()),e},t.resetModal=function(){i.hpModal("replaceContent",{content:t.createInitialContent()})},t.metricsData=function(e){var t,n="";return n=e.id?e.id:e.className?e.className:"INPUT"===e.tagName&&"submit"===e.getAttribute("type")?e.getAttribute("value"):e.innerText,t={url:window.location.href,button_name:n}},t.combineData=function(n){return e.extend(t.apiData,n)},i=t.createModal(),e("[data-hp-link]").on("click",function(){t.urlData=e(this).data("hp-link");var n=""!==t.urlData?{data:t.urlData}:{};n.event="create_lead",i.hpModal("open",o,function(){t.sendAnalytics(n,"submit_lead")})}),e(document).on("click",".hp-link-modal__zip-submit",function(){t.submitZip(this)}),e(document).on("click",".hp-link-modal a.hp-link-modal__close",function(n){n.preventDefault(),o.removeBackground=!0,i.hpModal("close",o,function(){closedWindow=e(".hp-link-modal__inner").children().attr("class"),sendData={event:"close_window",data:{closed_window:closedWindow}},t.sendAnalytics(sendData,"close_click"),t.resetModal()})}),e(document).on("focus",'.hp-link-modal input[data-hp-link__error="true"]',function(){t.resolveWarning()})}}(jQuery,{});